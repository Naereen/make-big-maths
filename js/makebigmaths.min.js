function display(){var e=$("#input #tex").val(),t=getSize(),n=document.createElement("script");n.setAttribute("type","math/tex"),n.textContent=e,$("#output").html(n),MathJax.Hub.Queue(["Typeset",MathJax.Hub,window.output]),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);var i=makeSearchParams({tex:e,size:t}),o=window.location.origin+window.location.pathname+(e.length?"?"+i:"");$("#link").text(o).attr("href",o)}function getSearchParams(){for(var e=location.search.slice(1),t=e.split("&"),n={},i=/^(?:(\w+)=)?(.*)$/,o=0;o<t.length;o++){var a=i.exec(t[o]),c=a[1]||"_query",r=a[2];n[c]=r}return console.log(n),n}function makeSearchParams(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function getSize(){return $("#input #size").val()/size_scale}function setSize(e){$("#input #size").val(e*size_scale).change()}var size_scale=5;$(function(){if($("#input #tex").on("change keyup",display),$("#input #size").on("change",function(){var e=getSize();$("#output").css("font-size",e+"em"),display()}),display(),location.search.length){var e=getSearchParams(),t=e.tex||e._query,n=e.size||2;t=unescape(t.replace(/\+/g," ")),$("#input #tex").val(t).change(),console.log(n),setSize(n)}});